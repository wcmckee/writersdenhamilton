(function(){'use strict';function a(){}var b=a.prototype;var c=this;var d=c.EventEmitter;function e(a,b){var c=a.length;while(c--)if(a[c].listener===b)return c;return -1;}function f(a){return function b(){return this[a].apply(this,arguments);};}b.getListeners=function g(a){var b=this._getEvents();var c;var d;if(typeof a==='object'){c={};for(d in b)if(b.hasOwnProperty(d)&&a.test(d))c[d]=b[d];}else c=b[a]||(b[a]=[]);return c;};b.flattenListeners=function h(a){var b=[];var c;for(c=0;c<a.length;c+=1)b.push(a[c].listener);return b;};b.getListenersAsObject=function i(a){var b=this.getListeners(a);var c;if(b instanceof Array){c={};c[a]=b;}return c||b;};b.addListener=function j(a,b){var c=this.getListenersAsObject(a);var d=typeof b==='object';var f;for(f in c)if(c.hasOwnProperty(f)&&e(c[f],b)===-1)c[f].push(d?b:{listener:b,once:false});return this;};b.on=f('addListener');b.addOnceListener=function k(a,b){return this.addListener(a,{listener:b,once:true});};b.once=f('addOnceListener');b.defineEvent=function l(a){this.getListeners(a);return this;};b.defineEvents=function m(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this;};b.removeListener=function n(a,b){var c=this.getListenersAsObject(a);var d;var f;for(f in c)if(c.hasOwnProperty(f)){d=e(c[f],b);if(d!==-1)c[f].splice(d,1);}return this;};b.off=f('removeListener');b.addListeners=function o(a,b){return this.manipulateListeners(false,a,b);};b.removeListeners=function p(a,b){return this.manipulateListeners(true,a,b);};b.manipulateListeners=function q(a,b,c){var d;var e;var f=a?this.removeListener:this.addListener;var g=a?this.removeListeners:this.addListeners;if(typeof b==='object'&&!(b instanceof RegExp)){for(d in b)if(b.hasOwnProperty(d)&&(e=b[d]))if(typeof e==='function')f.call(this,d,e);else g.call(this,d,e);}else{d=c.length;while(d--)f.call(this,b,c[d]);}return this;};b.removeEvent=function r(a){var b=typeof a;var c=this._getEvents();var d;if(b==='string')delete c[a];else if(b==='object'){for(d in c)if(c.hasOwnProperty(d)&&a.test(d))delete c[d];}else delete this._events;return this;};b.removeAllListeners=f('removeEvent');b.emitEvent=function s(a,b){var c=this.getListenersAsObject(a);var d;var e;var f;var g;for(f in c)if(c.hasOwnProperty(f)){e=c[f].length;while(e--){d=c[f][e];if(d.once===true)this.removeListener(a,d.listener);g=d.listener.apply(this,b||[]);if(g===this._getOnceReturnValue())this.removeListener(a,d.listener);}}return this;};b.trigger=f('emitEvent');b.emit=function t(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b);};b.setOnceReturnValue=function u(a){this._onceReturnValue=a;return this;};b._getOnceReturnValue=function v(){if(this.hasOwnProperty('_onceReturnValue'))return this._onceReturnValue;else return true;};b._getEvents=function w(){return this._events||(this._events={});};a.noConflict=function x(){c.EventEmitter=d;return a;};if(typeof define==='function'&&define.amd)define(function(){return a;});else if(typeof module==='object'&&module.exports)module.exports=a;else this.EventEmitter=a;}.call(this));(function(a){'use strict';var b=document.documentElement;var c=function(){};function d(b){var c=a.event;c.target=c.target||c.srcElement||b;return c;}if(b.addEventListener)c=function(a,b,c){a.addEventListener(b,c,false);};else if(b.attachEvent)c=function(a,b,c){a[b+c]=c.handleEvent?function(){var b=d(a);c.handleEvent.call(c,b);}:function(){var b=d(a);c.call(a,b);};a.attachEvent("on"+b,a[b+c]);};var e=function(){};if(b.removeEventListener)e=function(a,b,c){a.removeEventListener(b,c,false);};else if(b.detachEvent)e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c];}catch(d){a[b+c]=undefined;}};var f={bind:c,unbind:e};if(typeof define==='function'&&define.amd)define(f);else a.eventie=f;})(this);(function(a,b){'use strict';if(typeof define==='function'&&define.amd)define(['eventEmitter/EventEmitter','eventie/eventie'],function(c,d){return b(a,c,d);});else if(typeof exports==='object')module.exports=b(a,require('wolfy87-eventemitter'),require('eventie'));else a.imagesLoaded=b(a,a.EventEmitter,a.eventie);})(window,function factory(a,b,c){'use strict';var d=a.jQuery;var e=a.console;var f=typeof e!=='undefined';function g(a,b){for(var c in b)a[c]=b[c];return a;}var h=Object.prototype.toString;function i(a){return h.call(a)==='[object Array]';}function j(a){var b=[];if(i(a))b=a;else if(typeof a.length==='number')for(var c=0,d=a.length;c<d;c++)b.push(a[c]);else b.push(a);return b;}function k(a,b,c){if(!(this instanceof k))return new k(a,b);if(typeof a==='string')a=document.querySelectorAll(a);this.elements=j(a);this.options=g({},this.options);if(typeof b==='function')c=b;else g(this.options,b);if(c)this.on('always',c);this.getImages();if(d)this.jqDeferred=new d.Deferred();var e=this;setTimeout(function(){e.check();});}k.prototype=new b();k.prototype.options={};k.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];if(c.nodeName==='IMG')this.addImage(c);var d=c.nodeType;if(!d||!(d===1||d===9||d===11))continue;var e=c.querySelectorAll('img');for(var f=0,g=e.length;f<g;f++){var h=e[f];this.addImage(h);}}};k.prototype.addImage=function(a){var b=new l(a);this.images.push(b);};k.prototype.check=function(){var a=this;var b=0;var c=this.images.length;this.hasAnyBroken=false;if(!c){this.complete();return;}function d(d,g){if(a.options.debug&&f)e.log('confirm',d,g);a.progress(d);b++;if(b===c)a.complete();return true;}for(var g=0;g<c;g++){var h=this.images[g];h.on('confirm',d);h.check();}};k.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit('progress',b,a);if(b.jqDeferred&&b.jqDeferred.notify)b.jqDeferred.notify(b,a);});};k.prototype.complete=function(){var a=this.hasAnyBroken?'fail':'done';this.isComplete=true;var b=this;setTimeout(function(){b.emit(a,b);b.emit('always',b);if(b.jqDeferred){var c=b.hasAnyBroken?'reject':'resolve';b.jqDeferred[c](b);}});};if(d)d.fn.imagesLoaded=function(a,b){var c=new k(this,a,b);return c.jqDeferred.promise(d(this));};function l(a){this.img=a;}l.prototype=new b();l.prototype.check=function(){var a=m[this.img.src]||new n(this.img.src);if(a.isConfirmed){this.confirm(a.isLoaded,'cached was confirmed');return;}if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return;}var b=this;a.on('confirm',function(a,c){b.confirm(a.isLoaded,c);return true;});a.check();};l.prototype.confirm=function(a,b){this.isLoaded=a;this.emit('confirm',this,b);};var m={};function n(a){this.src=a;m[a]=this;}n.prototype=new b();n.prototype.check=function(){if(this.isChecked)return;var a=new Image();c.bind(a,'load',this);c.bind(a,'error',this);a.src=this.src;this.isChecked=true;};n.prototype.handleEvent=function(a){var b='on'+a.type;if(this[b])this[b](a);};n.prototype.onload=function(a){this.confirm(true,'onload');this.unbindProxyEvents(a);};n.prototype.onerror=function(a){this.confirm(false,'onerror');this.unbindProxyEvents(a);};n.prototype.confirm=function(a,b){this.isConfirmed=true;this.isLoaded=a;this.emit('confirm',this,b);};n.prototype.unbindProxyEvents=function(a){c.unbind(a.target,'load',this);c.unbind(a.target,'error',this);};return k;});